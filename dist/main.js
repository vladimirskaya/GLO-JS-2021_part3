(()=>{"use strict";(function(e){let t=document.querySelector("#timer-hours"),l=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds");function s(e){return e<10?"0"+e:e}setTimeout((function e(){let a=function(){let e=(new Date("31 july 2021").getTime()-(new Date).getTime())/1e3,t={timeRemaining:e,hours:0,minutes:0,seconds:0};return e>0&&(t.seconds=Math.floor(e%60),t.minutes=Math.floor(e/60%60),t.hours=Math.floor(e/60/60)%24,t.days=Math.floor(e/60/60)/24),t}();a.timeRemaining<0?(document.querySelector(".timer-numbers").style.color="red",clearTimeout(e)):setTimeout(e,1e3),t.textContent=s(a.hours),l.textContent=s(a.minutes),c.textContent=s(a.seconds)}),1e3)})(),(()=>{const e=document.querySelector(".menu"),t=document.querySelector("menu"),l=function(){t.classList.toggle("active-menu")};t.addEventListener("click",(e=>{let t=e.target;t=t.closest("a"),t&&l()})),e.addEventListener("click",l)})(),(()=>{const e=document.querySelector(".popup");document.querySelectorAll(".popup-btn").forEach((t=>{t.addEventListener("click",(()=>{const t=e.querySelector(".popup-content");let l,c=0,s=document.documentElement.clientWidth,a=t.getBoundingClientRect();e.style.display="block",t.style.left=`-${a.width}px`,s>768?l=setTimeout((function e(){c+=20,t.style.left=c+"px",parseFloat(t.style.left)>(s-a.width)/2?clearTimeout(l):setTimeout(e,15)}),15):t.style.left=`${a.x}px`}))})),e.addEventListener("click",(t=>{let l=t.target;l.classList.contains("popup-close")?e.style.display="none":(l=l.closest(".popup-content"),l||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),l=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let c=e.target;c=c.closest(".service-header-tab"),c&&t.forEach(((e,s)=>{e===c&&(e=>{for(let c=0;c<l.length;c++)e===c?(t[c].classList.add("active"),l[c].classList.remove("d-none")):(t[c].classList.remove("active"),l[c].classList.add("d-none"))})(s)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-dots")),l=document.querySelector(".portfolio-content");for(let l=0;l<e.length;l++){let e=document.createElement("li");e.className=0===l?"dot dot-active":"dot",t.append(e)}const c=t.querySelectorAll(".dot");let s,a=0;const o=(e,t,l)=>{e[t].classList.remove(l)},r=(e,t,l)=>{e[t].classList.add(l)},n=()=>{o(e,a,"portfolio-item-active"),o(c,a,"dot-active"),a++,a>=e.length&&(a=0),r(e,a,"portfolio-item-active"),r(c,a,"dot-active")},i=(e=3e3)=>{s=setInterval(n,e)};l.addEventListener("click",(t=>{t.preventDefault();let l=t.target;o(e,a,"portfolio-item-active"),o(c,a,"dot-active"),l.matches("#arrow-right")?a++:l.matches("#arrow-left")?a--:l.matches(".dot")&&c.forEach(((e,t)=>{e===l&&(a=t)})),a>=e.length&&(a=0),a<0&&(a=e.length-1),r(e,a,"portfolio-item-active"),r(c,a,"dot-active")})),l.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(s)})),l.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),(()=>{let e;const t=document.querySelector("#command");t.addEventListener("mouseover",(t=>{let l=t.target.closest("img");null!==l&&(e=l.src,l.src=l.dataset.img)})),t.addEventListener("mouseout",(t=>{let l=t.target.closest("img");null!==l&&(l.src=e)}))})(),(()=>{const e=document.querySelectorAll(".calc-block > input");e.forEach((e=>{e.value=""})),e.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D/g,"")}))}))})(),document.querySelectorAll("form").forEach((e=>{e.addEventListener("input",(e=>{let t=e.target.closest("input"),l="";if("user_name"===t.name?l=/[^а-я\ ]/gi:"user_message"===t.name?l=/[^а-я0-9\s\!\.\,\:\;\?\-]/gi:"user_phone"===t.name?l=/[^\d\+]/g:"user_email"===t.name&&(l=/[^a-z\@\-\_\.\!\~\*\']/gi),t.value=t.value.replace(l,""),"user_phone"===t.name){let e=t.value;e.replace(/\D/g,"").length<6?(t.form.querySelector("button").disabled=!0,t.title="Номер телефона должен содержать от 6 до 11 цифр."):(t.form.querySelector("button").disabled=!1,t.title=""),/^\+/.test(e)?(t.value="+"+t.value.replace(/\+/g,""),"+"===e[-1]&&e.replace(-1,""),/^\+\d{2}/.test(e)&&(e=e.replace(/\)*\(*/g,""),e=e.slice(0,2)+"("+e.slice(2),t.value=e),/^\+\d\(\d{4}/.test(e)&&(e=e.replace(/\(*\)*/g,""),e=e.slice(0,2)+"("+e.slice(2,5)+")"+e.slice(5),t.value=e),/^\+\d\(\d{3}\)\d{4}/.test(e)&&(e=e.replace(/\(*\)*\-*/g,""),e=e.slice(0,2)+"("+e.slice(2,5)+")"+e.slice(5,8)+"-"+e.slice(8)),/^\+\d\(\d{3}\)\d{3}\-\d{3}/.test(e)&&(e=e.replace(/\(*\)*\-*/g,""),e=e.slice(0,2)+"("+e.slice(2,5)+")"+e.slice(5,8)+"-"+e.slice(8,10)+"-"+e.slice(10)),/^\+\d\(\d{3}\)\d{3}\-\d{2}\-\d{2}/.test(e)&&(e=e.slice(0,16),t.value=e)):(/^\d{4}/.test(e)&&(e=e.replace(/\)*\(*\-*/g,""),e=e.slice(0,3)+"-"+e.slice(3),t.value=e),/^\d{3}\-\d{4}/.test(e)&&(e=e.replace(/\(*\)*\-*/g,""),e=e.slice(0,3)+"-"+e.slice(3,5)+"-"+e.slice(5),t.value=e),/^\d{3}\-\d{2,3}\-?\d{0,2}/.test(e)&&e.length>10&&e.length<14&&(e=e.replace(/\(*\)*\-*/g,""),e=e[0]+"("+e.slice(1,4)+")"+e.slice(4,7)+"-"+e.slice(7),t.value=e),14===e.length&&(e=e.replace(/\(*\)*\-*/g,""),e=e[0]+"("+e.slice(1,4)+")"+e.slice(4,7)+"-"+e.slice(7,9)+"-"+e.slice(9),t.value=e),/^\d\(\d{3}\)\d{3}\-\d{2}\-\d{2}/.test(e)&&(e=e.slice(0,15),t.value=e))}"user_email"===t.name&&/^\W/.test(t.value)&&(t.value="")})),e.querySelectorAll("input").forEach((e=>{e.addEventListener("blur",(e=>{let t=e.target;"user_name"===t.name||"user_message"===t.name?function(e){let t=e.value.replace(/\ {2,}/," ").replace(/\-{2,}/,"-").trim(),l="";t&&("user_name"===e.name?t.split(" ").forEach(((e,t)=>{l+=e[0].toUpperCase()+e.slice(1).toLowerCase()+" "})):l=t[0].toUpperCase()+t.slice(1).toLowerCase(),e.value=l)}(t):"user_phone"===t.name?function(e){let t="",l=e.value;if(l){if(l=l.replace(/\-/g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/\+/,""),l.length<6)return void(t=l);switch(!0){case 6===l.length:t=l.slice(0,3)+"-"+l.slice(3);break;case 7===l.length:t=l.slice(0,3)+"-"+l.slice(3,5)+"-"+l.slice(5);break;case 8===l.length:t=l.slice(0,4)+"-"+l.slice(4,7)+"-"+l.slice(7);break;case 9===l.length||10===l.length:t=l[0]+"("+l.slice(1,4)+")"+l.slice(4,7)+"-"+l.slice(7);break;case 11===l.length:t=l[0]+"("+l.slice(1,4)+")"+l.slice(4,7)+"-"+l.slice(7,9)+"-"+l.slice(9)}"+"===e.value&&(t="+"+t)}e.value=t}(t):"user_email"===t.name&&function(e){let t="",l=/.+\./,c=/.+\@/,s=e.value.replace(/\@{2,}/g,"@").replace(/\.{2,}/g,".");if(s=s.replace(/\.$/,"").replace(/\@$/,""),s)if(s.lastIndexOf("@")>s.lastIndexOf(".")||!s.includes("@")||!s.includes("."))t=s;else{let e=String(s.match(l)),a=s.replace(e,"").replace(/[^A-Z0-9]/gi,""),o=String(e.match(c)),r=e.replace(o,"").replace(/[^A-Z0-9\-]/gi,"").replace(/\-{2,}/g,"");"-"===r.slice(-1)&&(r=r.slice(0,-1)),"-"===r[0]&&(r=r.slice(1)),t=o.replace(/\@/g,"")+"@"+r+"."+a}e.value=t}(t)}))}))})),((e=100)=>{const t=document.querySelector(".calc-block"),l=document.querySelector(".calc-type"),c=document.querySelector(".calc-square"),s=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),o=document.getElementById("total");t.addEventListener("change",(t=>{const r=t.target;(r.matches(".calc-block")||r.matches(".calc-type")||r.matches(".calc-day")||r.matches(".calc-count"))&&(()=>{let t=0,r=1,n=1;const i=l.options[l.selectedIndex].value,u=+c.value;a.value>1&&(r+=(a.value-1)/10),s.value&&s.value<5?n*=2:s.value&&s.value<10&&(n*=1.5),t=i&&u?e*i*u*r*n:0,o.textContent=t})()}))})(100),statusMessage=document.createElement("div"),statusMessage.style.cssText="font-size: 2rem;",[...document.forms].forEach(((e,t)=>{e.addEventListener("submit",(l=>{l.preventDefault(),e.appendChild(statusMessage),2===t&&(statusMessage.style.color="#fff"),statusMessage.textContent="Передача данных...";const c=new FormData(e);let s={};c.forEach(((e,t)=>{s[t]=e})),function(e){return fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(s).then((e=>{if(200!==e.status)throw new Error("Status network not 200");statusMessage.textContent="Спасибо! Мы скоро с Вами свяжемся!"})).catch((e=>{e&&(statusMessage.textContent="Что-то пошло не так...")})),function(){allInputs=document.querySelectorAll("input");for(let e of allInputs)e.value=""}()}))}))})();