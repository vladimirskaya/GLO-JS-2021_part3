(()=>{"use strict";(function(e){let t=document.querySelector("#timer-hours"),l=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds");function o(e){return e<10?"0"+e:e}setTimeout((function e(){let n=function(){let e=(new Date("31 july 2021").getTime()-(new Date).getTime())/1e3,t={timeRemaining:e,hours:0,minutes:0,seconds:0};return e>0&&(t.seconds=Math.floor(e%60),t.minutes=Math.floor(e/60%60),t.hours=Math.floor(e/60/60)%24,t.days=Math.floor(e/60/60)/24),t}();n.timeRemaining<0?(document.querySelector(".timer-numbers").style.color="red",clearTimeout(e)):setTimeout(e,1e3),t.textContent=o(n.hours),l.textContent=o(n.minutes),c.textContent=o(n.seconds)}),1e3)})(),(()=>{const e=document.querySelector(".menu"),t=document.querySelector("menu"),l=function(){t.classList.toggle("active-menu")};t.addEventListener("click",(e=>{let t=e.target;t=t.closest("a"),t&&l()})),e.addEventListener("click",l)})(),(()=>{const e=document.querySelector(".popup");document.querySelectorAll(".popup-btn").forEach((t=>{t.addEventListener("click",(()=>{const t=e.querySelector(".popup-content");let l,c=0,o=document.documentElement.clientWidth,n=t.getBoundingClientRect();console.log("coordinates.width",n);const s=parseFloat(getComputedStyle(t).paddingLeft);console.log("paddLeft",s),console.log("csss",getComputedStyle(t).position),e.style.display="block",t.style.left=`-${n.width}px`,o>768?l=setTimeout((function e(){if(c+=20,n=t.getBoundingClientRect(),console.log("coordinates.width",n),t.style.left=c+"px",parseFloat(t.style.left)>=(o-n.width)/2+s)return console.log((o-n.width)/2),console.log(o,"середина окна ",o/2),console.log("середина формы ",parseFloat(t.style.left)+n.width/2,"a x = ",n.x),t.style.left=parseFloat(t.style.left)-20+"px",void clearTimeout(l);setTimeout(e,15)}),15):t.style.left=`${n.x}px`}))})),e.addEventListener("click",(t=>{let l=t.target;l.classList.contains("popup-close")?e.style.display="none":(l=l.closest(".popup-content"),l||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),l=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let c=e.target;c=c.closest(".service-header-tab"),c&&t.forEach(((e,o)=>{e===c&&(e=>{for(let c=0;c<l.length;c++)e===c?(t[c].classList.add("active"),l[c].classList.remove("d-none")):(t[c].classList.remove("active"),l[c].classList.add("d-none"))})(o)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-dots")),l=document.querySelector(".portfolio-content");for(let l=0;l<e.length;l++){let e=document.createElement("li");e.className=0===l?"dot dot-active":"dot",t.append(e)}const c=t.querySelectorAll(".dot");let o,n=0;const s=(e,t,l)=>{e[t].classList.remove(l)},r=(e,t,l)=>{e[t].classList.add(l)},a=()=>{s(e,n,"portfolio-item-active"),s(c,n,"dot-active"),n++,n>=e.length&&(n=0),r(e,n,"portfolio-item-active"),r(c,n,"dot-active")},i=(e=3e3)=>{o=setInterval(a,e)};l.addEventListener("click",(t=>{t.preventDefault();let l=t.target;s(e,n,"portfolio-item-active"),s(c,n,"dot-active"),l.matches("#arrow-right")?n++:l.matches("#arrow-left")?n--:l.matches(".dot")&&c.forEach(((e,t)=>{e===l&&(n=t)})),n>=e.length&&(n=0),n<0&&(n=e.length-1),r(e,n,"portfolio-item-active"),r(c,n,"dot-active")})),l.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),l.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),(()=>{let e;const t=document.querySelector("#command");t.addEventListener("mouseover",(t=>{let l=t.target.closest("img");null!==l&&(e=l.src,l.src=l.dataset.img)})),t.addEventListener("mouseout",(t=>{let l=t.target.closest("img");null!==l&&(l.src=e)}))})(),(()=>{(()=>{const e=document.querySelectorAll(".calc-block > input");e.forEach((e=>{e.value=""})),e.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D/g,"")}))}))})();const e=document.querySelectorAll("form");document.querySelectorAll(".form-email").forEach((e=>{e.required=!0})),e.forEach((e=>{e.addEventListener("input",(e=>{let t=e.target.closest("input"),l="";if("user_name"===t.name?l=/[^а-я\ ]/gi:"user_message"===t.name?l=/[^а-я\s\!\.\,\:\;\?\-]/gi:"user_phone"===t.name?l=/[^\d\+]/g:"user_email"===t.name&&(l=/[^a-z\@\-\_\.\!\~\*\']/gi),t.value=t.value.replace(l,""),"user_phone"===t.name){let e=t.value;e.replace(/\D/g,"").length<5?(t.form.querySelector("button").disabled=!0,t.title="Номер телефона должен содержать от 5 до 11 цифр."):(t.form.querySelector("button").disabled=!1,t.title=""),/^\+/.test(e)?(e="+"+e.replace(/\+/g,""),"+"===e[e.length-1]&&e.replace(/\+$/g,""),/^\+\d{2}/.test(e)&&(e=e.replace(/\)*\(*/g,""),e=e.slice(0,2)+"("+e.slice(2)),/^\+\d\(\d{4}/.test(e)&&(e=e.replace(/\(*\)*/g,""),e=e.slice(0,2)+"("+e.slice(2,5)+")"+e.slice(5)),/^\+\d\(\d{3}\)\d{4}/.test(e)&&(e=e.replace(/\(*\)*\-*/g,""),e=e.slice(0,2)+"("+e.slice(2,5)+")"+e.slice(5,8)+"-"+e.slice(8)),/^\+\d\(\d{3}\)\d{3}\-\d{3}/.test(e)&&(e=e.replace(/\(*\)*\-*/g,""),e=e.slice(0,2)+"("+e.slice(2,5)+")"+e.slice(5,8)+"-"+e.slice(8,10)+"-"+e.slice(10)),/^\+\d\(\d{3}\)\d{3}\-\d{2}\-\d{2}/.test(e)&&(e=e.slice(0,16)),t.value=e):(e=e.replace(/\+/g,""),/^\d{4}/.test(e)&&(e=e.replace(/\)*\(*\-*\+*/g,""),e=e.slice(0,3)+"-"+e.slice(3)),/^\d{3}\-\d{4}/.test(e)&&(e=e.replace(/\(*\)*\-*\+*/g,""),e=e.slice(0,3)+"-"+e.slice(3,5)+"-"+e.slice(5)),/^\d{3}\-\d{2,3}\-?\d{0,2}/.test(e)&&e.length>10&&e.length<14&&(e=e.replace(/\(*\)*\-*\+*/g,""),e=e[0]+"("+e.slice(1,4)+")"+e.slice(4,7)+"-"+e.slice(7)),14===e.length&&(e=e.replace(/\(*\)*\-*\+*/g,""),e=e[0]+"("+e.slice(1,4)+")"+e.slice(4,7)+"-"+e.slice(7,9)+"-"+e.slice(9)),/^\d\(\d{3}\)\d{3}\-\d{2}\-\d{2}/.test(e)&&(e=e.slice(0,15)),t.value=e)}"user_email"===t.name&&/^\W/.test(t.value)&&(t.value="")})),e.querySelectorAll("input").forEach((e=>{e.addEventListener("blur",(e=>{let t=e.target;"user_name"===t.name||"user_message"===t.name?function(e){let t=e.value.replace(/\ {2,}/," ").replace(/\-{2,}/,"-").trim(),l="";t&&("user_name"===e.name?t.split(" ").forEach(((e,t)=>{l+=e[0].toUpperCase()+e.slice(1).toLowerCase()+" "})):l=t[0].toUpperCase()+t.slice(1).toLowerCase(),e.value=l)}(t):"user_phone"===t.name?function(e){let t="",l=e.value.replace(/\-/g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/\+/,"");if(l){if(5<l.length||7<l.length)return;if(l.length<8)switch(!0){case l.length<7:t=l.slice(0,3)+"-"+l.slice(3);break;case 7===l.length:t=l.slice(0,3)+"-"+l.slice(3,5)+"-"+l.slice(5)}}e.value=t}(t):"user_email"===t.name&&function(e){let t="",l=/.+\./,c=/.+\@/,o=e.value.replace(/\@{2,}/g,"@").replace(/\.{2,}/g,".");if(o=o.replace(/\.$/,"").replace(/\@$/,""),o)if(o.lastIndexOf("@")>o.lastIndexOf(".")||!o.includes("@")||!o.includes("."))t=o;else{let e=String(o.match(l)),n=o.replace(e,"").replace(/[^A-Z0-9]/gi,""),s=String(e.match(c)),r=e.replace(s,"").replace(/[^A-Z0-9\-]/gi,"").replace(/\-{2,}/g,"");"-"===r.slice(-1)&&(r=r.slice(0,-1)),"-"===r[0]&&(r=r.slice(1)),t=s.replace(/\@/g,"")+"@"+r+"."+n}e.value=t}(t)}))}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),l=document.querySelector(".calc-type"),c=document.querySelector(".calc-square"),o=document.querySelector(".calc-day"),n=document.querySelector(".calc-count"),s=document.getElementById("total");t.addEventListener("change",(t=>{const r=t.target;(r.matches(".calc-block")||r.matches(".calc-type")||r.matches(".calc-day")||r.matches(".calc-count"))&&(()=>{let t=0,r=1,a=1;const i=l.options[l.selectedIndex].value,u=+c.value;n.value>1&&(r+=(n.value-1)/10),o.value&&o.value<5?a*=2:o.value&&o.value<10&&(a*=1.5),t=i&&u?e*i*u*r*a:0,s.textContent=t})()}))})(100),(()=>{const e=document.createElement("div");e.style.cssText="font-size: 2rem;",[...document.forms].forEach(((t,l)=>{t.addEventListener("submit",(c=>{c.preventDefault(),t.appendChild(e),2===l&&(e.style.color="#fff"),e.textContent="Передача данных...";const o=new FormData(t);let n={};o.forEach(((e,t)=>{n[t]=e})),function(e){return fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(n).then((t=>{if(200!==t.status)throw new Error("Status network not 200");e.textContent="Спасибо! Мы скоро с Вами свяжемся!"})).catch((t=>{t&&(e.textContent="Что-то пошло не так...")})),function(){const e=document.querySelectorAll("input");for(let t of e)t.value=""}()}))}))})()})();